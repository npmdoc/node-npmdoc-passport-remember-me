<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/jaredhanson/passport-remember-me#readme">passport-remember-me (v0.0.1)</a>
</h1>
<h4>Remember Me cookie authentication strategy for Passport.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport-remember-me">module passport-remember-me</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy">
            function <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy
            <span class="apidocSignatureSpan">(options, verify, issue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy.super_">
            function <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy.super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy.super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">passport-remember-me.</span>utils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">passport-remember-me.</span>version</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport-remember-me.Strategy">module passport-remember-me.Strategy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy.Strategy">
            function <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy
            <span class="apidocSignatureSpan">(options, verify, issue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy.super_">
            function <span class="apidocSignatureSpan">passport-remember-me.Strategy.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport-remember-me.Strategy.prototype">module passport-remember-me.Strategy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport-remember-me.Strategy.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport-remember-me.Strategy.super_">module passport-remember-me.Strategy.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy.super_.super_">
            function <span class="apidocSignatureSpan">passport-remember-me.Strategy.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport-remember-me.Strategy.super_.prototype">module passport-remember-me.Strategy.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.Strategy.super_.prototype.authenticate">
            function <span class="apidocSignatureSpan">passport-remember-me.Strategy.super_.prototype.</span>authenticate
            <span class="apidocSignatureSpan">(req, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.passport-remember-me.utils">module passport-remember-me.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.passport-remember-me.utils.merge">
            function <span class="apidocSignatureSpan">passport-remember-me.utils.</span>merge
            <span class="apidocSignatureSpan">(a, b)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport-remember-me" id="apidoc.module.passport-remember-me">module passport-remember-me</a></h1>


    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy" id="apidoc.element.passport-remember-me.Strategy">
        function <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy
        <span class="apidocSignatureSpan">(options, verify, issue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy(options, verify, issue) {
  if (typeof options == 'function') {
    issue = verify;
    verify = options;
    options = {};
  }
  if (!verify) throw new Error('remember me cookie authentication strategy requires a verify function');
  if (!issue) throw new Error('remember me cookie authentication strategy requires an issue function');

  var opts = { path: '/', httpOnly: true, maxAge: 604800000 }; // maxAge: 7 days
  this._key = options.key || 'remember_me';
  this._opts = utils.merge(opts, options.cookie);

  passport.Strategy.call(this);
  this.name = 'remember-me';
  this._verify = verify;
  this._issue = issue;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy.super_" id="apidoc.element.passport-remember-me.Strategy.super_">
        function <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy.super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport-remember-me.Strategy" id="apidoc.module.passport-remember-me.Strategy">module passport-remember-me.Strategy</a></h1>


    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy.Strategy" id="apidoc.element.passport-remember-me.Strategy.Strategy">
        function <span class="apidocSignatureSpan">passport-remember-me.</span>Strategy
        <span class="apidocSignatureSpan">(options, verify, issue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy(options, verify, issue) {
  if (typeof options == 'function') {
    issue = verify;
    verify = options;
    options = {};
  }
  if (!verify) throw new Error('remember me cookie authentication strategy requires a verify function');
  if (!issue) throw new Error('remember me cookie authentication strategy requires an issue function');

  var opts = { path: '/', httpOnly: true, maxAge: 604800000 }; // maxAge: 7 days
  this._key = options.key || 'remember_me';
  this._opts = utils.merge(opts, options.cookie);

  passport.Strategy.call(this);
  this.name = 'remember-me';
  this._verify = verify;
  this._issue = issue;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy.super_" id="apidoc.element.passport-remember-me.Strategy.super_">
        function <span class="apidocSignatureSpan">passport-remember-me.Strategy.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport-remember-me.Strategy.prototype" id="apidoc.module.passport-remember-me.Strategy.prototype">module passport-remember-me.Strategy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy.prototype.authenticate" id="apidoc.element.passport-remember-me.Strategy.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport-remember-me.Strategy.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  // The rememeber me cookie is only consumed if the request is not
  // authenticated.  This is in preference to the session, which is typically
  // established at the same time the remember me cookie is issued.
  if (req.isAuthenticated()) { return this.pass(); }

  var token = req.cookies[this._key];

  // Since the remember me cookie is primarily a convenience, the lack of one is
  // not a failure.  In this case, a response should be rendered indicating a
  // logged out state, rather than denying the request.
  if (!token) { return this.pass(); }

  var self = this;

  function verified(err, user, info) {
    if (err) { return self.error(err); }

    // Express exposes the response to the request.  We need the response to set
    // a cookie, so we'll grab it this way.  This breaks the encapsulation of
    // Passport's Strategy API, but is acceptable for this strategy.
    var res = req.res;

    if (!user) {
      // The remember me cookie was not valid.  However, because this
      // authentication method is primarily a convenience, we don't want to
      // deny the request.  Instead we'll clear the invalid cookie and proceed
      // to respond in a manner which indicates a logged out state.
      //
      // Note that a failure at this point may indicate a possible theft of the
      // cookie.  If handling this situation is a requirement, it is up to the
      // application to encode the value in such a way that this can be detected.
      // For a discussion on such matters, refer to:
      //   http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/
      //   http://jaspan.com/improved_persistent_login_cookie_best_practice
      //   http://web.archive.org/web/20130214051957/http://jaspan.com/improved_persistent_login_cookie_best_practice
      //   http://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication

      res.clearCookie(self._key);
      return self.pass();
    }

    // The remember me cookie was valid and consumed.  For security reasons,
    // the just-used token should have been invalidated by the application.
    // A new token will be issued and set as the value of the remember me
    // cookie.
    function issued(err, val) {
      if (err) { return self.error(err); }
      res.cookie(self._key, val, self._opts);
      return self.success(user, info);
    }

    self._issue(user, issued);
  }

  self._verify(token, verified);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      return done(null, token);
    });
  }
));

#### Authenticate Requests

Use `passport.<span class="apidocCodeKeywordSpan">authenticate</span>()`, specifying the `'remember-me'` strategy, to
authenticate requests.

This is typically used in an application's middleware stack, to log the user
back in the next time they visit any page on your site.  For example:

app.configure(function() {
  app.use(express.cookieParser());
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport-remember-me.Strategy.super_" id="apidoc.module.passport-remember-me.Strategy.super_">module passport-remember-me.Strategy.super_</a></h1>


    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy.super_.super_" id="apidoc.element.passport-remember-me.Strategy.super_.super_">
        function <span class="apidocSignatureSpan">passport-remember-me.Strategy.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Strategy() {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport-remember-me.Strategy.super_.prototype" id="apidoc.module.passport-remember-me.Strategy.super_.prototype">module passport-remember-me.Strategy.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.passport-remember-me.Strategy.super_.prototype.authenticate" id="apidoc.element.passport-remember-me.Strategy.super_.prototype.authenticate">
        function <span class="apidocSignatureSpan">passport-remember-me.Strategy.super_.prototype.</span>authenticate
        <span class="apidocSignatureSpan">(req, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (req, options) {
  throw new Error('Strategy#authenticate must be overridden by subclass');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      return done(null, token);
    });
  }
));

#### Authenticate Requests

Use `passport.<span class="apidocCodeKeywordSpan">authenticate</span>()`, specifying the `'remember-me'` strategy, to
authenticate requests.

This is typically used in an application's middleware stack, to log the user
back in the next time they visit any page on your site.  For example:

app.configure(function() {
  app.use(express.cookieParser());
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.passport-remember-me.utils" id="apidoc.module.passport-remember-me.utils">module passport-remember-me.utils</a></h1>


    <h2>
        <a href="#apidoc.element.passport-remember-me.utils.merge" id="apidoc.element.passport-remember-me.utils.merge">
        function <span class="apidocSignatureSpan">passport-remember-me.utils.</span>merge
        <span class="apidocSignatureSpan">(a, b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">merge = function (a, b){
  if (a &amp;&amp; b) {
    for (var key in b) {
      a[key] = b[key];
    }
  }
  return a;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Merge object b with object a.
*
*     var a = { foo: 'bar' }
*       , b = { bar: 'baz' };
*
*     utils.<span class="apidocCodeKeywordSpan">merge</span>(a, b);
*     // =&gt; { foo: 'bar', bar: 'baz' }
*
* @param {Object} a
* @param {Object} b
* @return {Object}
* @api private
*/
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>